<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.1">
<title data-rh="true">Architecture | Fluss</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://alibaba.github.io/fluss-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://alibaba.github.io/fluss-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://alibaba.github.io/fluss-docs/docs/concepts/architecture/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architecture | Fluss"><meta data-rh="true" name="description" content="A Fluss cluster consists of two main processes: the CoordinatorServer and the TabletServer."><meta data-rh="true" property="og:description" content="A Fluss cluster consists of two main processes: the CoordinatorServer and the TabletServer."><link data-rh="true" rel="icon" href="/fluss-docs/img/logo.svg"><link data-rh="true" rel="canonical" href="https://alibaba.github.io/fluss-docs/docs/concepts/architecture/"><link data-rh="true" rel="alternate" href="https://alibaba.github.io/fluss-docs/docs/concepts/architecture/" hreflang="en"><link data-rh="true" rel="alternate" href="https://alibaba.github.io/fluss-docs/docs/concepts/architecture/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://xx-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/fluss-docs/blog/rss.xml" title="Fluss RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fluss-docs/blog/atom.xml" title="Fluss Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Fluss" href="/fluss-docs/opensearch.xml"><link rel="stylesheet" href="/fluss-docs/assets/css/styles.1072641d.css">
<script src="/fluss-docs/assets/js/runtime~main.b323fc5c.js" defer="defer"></script>
<script src="/fluss-docs/assets/js/main.d4281fe9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fluss-docs/"><b class="navbar__title text--truncate">Fluss</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fluss-docs/docs/intro/">Docs</a><a class="navbar__item navbar__link" href="/fluss-docs/blog/">Blog</a><a class="navbar__item navbar__link" href="/fluss-docs/community/">Community</a><a class="navbar__item navbar__link" href="/fluss-docs/roadmap/">Roadmap</a><a class="navbar__item navbar__link" href="/fluss-docs/downloads/">Downloads</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/alibaba/fluss" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fluss-docs/docs/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fluss-docs/docs/quickstart/flink/">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/fluss-docs/docs/concepts/architecture/">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/fluss-docs/docs/concepts/architecture/">Architecture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fluss-docs/docs/install-deploy/overview/">Installation &amp; Deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fluss-docs/docs/table-design/overview/">Table Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fluss-docs/docs/engine-flink/getting-started/">Engine Flink</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fluss-docs/docs/streaming-lakehouse/overview/">Streaming Lakehouse</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fluss-docs/docs/maintenance/configuration/">Maintenance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/fluss-docs/docs/dev/building/">Development Guide</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/fluss-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architecture</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture</h1></header>
<p>A Fluss cluster consists of two main processes: the <strong>CoordinatorServer</strong> and the <strong>TabletServer</strong>.</p>
<p><img decoding="async" loading="lazy" alt="Fluss Architecture" src="/fluss-docs/assets/images/architecture-b318beb94d717f94d6fe64b6303e79ab.png" width="6714" height="4904" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="coordinatorserver">CoordinatorServer<a href="#coordinatorserver" class="hash-link" aria-label="Direct link to CoordinatorServer" title="Direct link to CoordinatorServer">​</a></h2>
<p>The <strong>CoordinatorServer</strong> serves as the central control and management component of the cluster. It is responsible for maintaining metadata, managing tablet allocation, listing nodes, and handling permissions.</p>
<p>Additionally, it coordinates critical operations such as:</p>
<ul>
<li>Rebalancing data during node scaling (upscaling or downscaling).</li>
<li>Managing data migration and service node switching in the event of node failures.</li>
<li>Overseeing table management tasks, including creating or deleting tables and updating bucket counts.</li>
</ul>
<p>As the <strong>brain</strong> of the cluster, the <strong>Coordinator Server</strong> ensures efficient cluster operation and seamless management of resources.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tabletserver">TabletServer<a href="#tabletserver" class="hash-link" aria-label="Direct link to TabletServer" title="Direct link to TabletServer">​</a></h2>
<p>The <strong>TabletServer</strong> is responsible for data storage, persistence, and providing I/O services directly to users. It comprises two key components: <strong>LogStore</strong> and <strong>KvStore</strong>.</p>
<ul>
<li>For <strong>PrimaryKey Tables</strong> which support updates, both <strong>LogStore</strong> and <strong>KvStore</strong> are activated. The KvStore is used to support updates and point lookup efficiently. LogStore is used to store the changelogs of the table.</li>
<li>For <strong>Log Tables</strong> which only supports appends, only the <strong>LogStore</strong> is activated, optimizing performance for write-heavy workloads.</li>
</ul>
<p>This architecture ensures the <strong>TabletServer</strong> delivers tailored data handling capabilities based on table types.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="logstore">LogStore<a href="#logstore" class="hash-link" aria-label="Direct link to LogStore" title="Direct link to LogStore">​</a></h3>
<p>The <strong>LogStore</strong> is designed to store log data, functioning similarly to a database binlog.
Messages can only be appended, not modified, ensuring data integrity.
Its primary purpose is to enable low-latency streaming reads and to serve as the write-ahead log (WAL) for restoring the <strong>KvStore</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kvstore">KvStore<a href="#kvstore" class="hash-link" aria-label="Direct link to KvStore" title="Direct link to KvStore">​</a></h3>
<p>The <strong>KvStore</strong> is used to store table data, functioning similarly to database tables. It supports data updates and deletions, enabling efficient querying and table management. Additionally, it generates comprehensive changelogs to track data modifications.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tablet--bucket">Tablet / Bucket<a href="#tablet--bucket" class="hash-link" aria-label="Direct link to Tablet / Bucket" title="Direct link to Tablet / Bucket">​</a></h3>
<p>Table data is divided into multiple buckets based on the defined bucketing policy.</p>
<p>Data for the <strong>LogStore</strong> and <strong>KvStore</strong> is stored within tablets. Each tablet consists of a <strong>LogTablet</strong> and, optionally, a <strong>KvTablet</strong>, depending on whether the table supports updates.
Both <strong>LogStore</strong> and <strong>KvStore</strong> adhere to the same bucket-splitting and tablet allocation policies. As a result, <strong>LogTablets</strong> and <strong>KvTablets</strong> with the same <code>tablet_id</code> are always allocated to the same <strong>TabletServer</strong> for efficient data management.</p>
<p>The <strong>LogTablet</strong> supports multiple replicas based on the table&#x27;s configured replication factor, ensuring high availability and fault tolerance. <strong>Currently, replication is not supported for KvTablets</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="zookeeper">Zookeeper<a href="#zookeeper" class="hash-link" aria-label="Direct link to Zookeeper" title="Direct link to Zookeeper">​</a></h2>
<p>Fluss currently utilizes <strong>ZooKeeper</strong> for cluster coordination, metadata storage, and cluster configuration management.
In upcoming releases, <strong>ZooKeeper will be replaced</strong> by <strong>KvStore</strong> for metadata storage and <strong>Raft</strong> for cluster coordination and ensuring consistency. This transition aims to streamline operations and enhance system reliability. See the <a href="/fluss-docs/roadmap/">Roadmap</a> for more details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="remote-storage">Remote Storage<a href="#remote-storage" class="hash-link" aria-label="Direct link to Remote Storage" title="Direct link to Remote Storage">​</a></h2>
<p><strong>Remote Storage</strong> serves two primary purposes:</p>
<ul>
<li><strong>Hierarchical Storage for LogStores:</strong> By offloading LogStore data, it reduces storage costs and accelerates scaling operations.</li>
<li><strong>Persistent Storage for KvStores:</strong> It ensures durable storage for KvStore data and collaborates with LogStore to enable fault recovery.</li>
</ul>
<p>Additionally, <strong>Remote Storage</strong> allows clients to perform bulk read operations on Log and Kv data, enhancing data analysis efficiency and reduce the overhead on Fluss servers. In the future, it will also support bulk write operations, optimizing data import workflows for greater scalability and performance.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="client">Client<a href="#client" class="hash-link" aria-label="Direct link to Client" title="Direct link to Client">​</a></h2>
<p>Fluss clients/sdks support streaming reads/writes, batch read/writes, DDL and point queries. Currently, the main implementation of client is Flink Connector. Users can use Flink SQL to easily operate Fluss tables and data.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/fluss-docs/docs/quickstart/flink/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Flink</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/fluss-docs/docs/install-deploy/overview/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#coordinatorserver" class="table-of-contents__link toc-highlight">CoordinatorServer</a></li><li><a href="#tabletserver" class="table-of-contents__link toc-highlight">TabletServer</a><ul><li><a href="#logstore" class="table-of-contents__link toc-highlight">LogStore</a></li><li><a href="#kvstore" class="table-of-contents__link toc-highlight">KvStore</a></li><li><a href="#tablet--bucket" class="table-of-contents__link toc-highlight">Tablet / Bucket</a></li></ul></li><li><a href="#zookeeper" class="table-of-contents__link toc-highlight">Zookeeper</a></li><li><a href="#remote-storage" class="table-of-contents__link toc-highlight">Remote Storage</a></li><li><a href="#client" class="table-of-contents__link toc-highlight">Client</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Alibaba, Inc.
      Apache®, Apache Flink®, Flink®, Apache Kafka®, Kafka®, Spark® and associated open source project names and logos are trademarks of the Apache Software Foundation.</div></div></div></footer></div>
</body>
</html>